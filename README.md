### Чат-бот для телеграм и вконтакте с автответами.
Скрипт может самостоятельно отвечать на вопросы пользователей.

Для этого вопросы пользователей обрабатываются через сервис [dialogflow](https://dialogflow.cloud.google.com/).
Для корректной работы надо настроить в dialogflow список вопросов и ответов.

Скрипт работаетс с телеграм и вконтакте. При работе в телеграм на незнакомый вопрос скрипт отвечает 'Я не понимаю о чём речь', в вконтакте на незнакомый вопрос скрипт ничего не отвечает, дает возможность ответить техпотдержке.

### Пример работы
Протестировать работу скрипта здесь:

телеграм - @DevmanAlexBot

вконтакте - https://vk.com/public189760742

![Пример работы](telegram.gif)


### Требования к окружению
Python 3

### Описание файлов
`telegram_bot.py` - для ответов в телеграм

`vk_bot.py` - для ответов в вконтакте

`create_intents.py` - заполняет тренировочные фразы в dialogflow, фразы берутся из `questions.json` 

`questions.json` - список вопросов и ответов для заполнения в dialogflow

`loger.py` - файл настройки логгирования

`Procfile` - файл настройки для сервиса heroku.com, нужен если скрипт выкладывается на хостинге heroku.com

### Как установить
Создайте группу в телеграм.

Создайте сообщество в вконтакте

Зарегестрируйтесь в dialogflow.

Получите json файл с ключами от dialogflow.

Запишите в файл .env данные 

TOKEN=токен чата в телеграм, получить у BotFather 

GOOGLE_APPLICATION_CREDENTIALS= путь до файла с ключами в dialogflow

VK_TOKEN=ключь в вконтакте

CHAT_ID= чат телеграм канала

Python 3 должен быть уже установлен. Затем используйте pip(или pip3, если есть конфликт с Python2) для установки зависимостей:

`pip install -r requirements.txt`

### Обучение бота

Для обучения бота нужны тренировочные фразы образцы и ответы на них.

Что бы не писать вручную фразы процесс автоматизирован.

Необходимо в файле `questions.json` создать словарь 

Образец тренировочных фрах 
```
{"Забыл пароль": {
      "questions": [
        "Не помню пароль",
        "Не могу войти",
        "Проблемы со входом",
        "Забыл пароль",
        "Забыл логин",
        "Восстановить пароль",
        "Как восстановить пароль",
        "Неправильный логин или пароль",
        "Ошибка входа",
        "Не могу войти в аккаунт"
      ],
      "answer": "Если вы не можете войти на сайт, воспользуйтесь кнопкой «Забыли пароль?» под формой входа. Вам на почту прийдёт письмо с дальнейшими инструкциями. Проверьте папку «Спам», иногда письма попадают в неё."
    }}
```
Запустить скрипт `create_intents.py` скрипт автоматически добавит фразы в dialogflow
